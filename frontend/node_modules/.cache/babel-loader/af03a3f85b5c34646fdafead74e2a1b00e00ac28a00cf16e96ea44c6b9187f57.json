{"ast":null,"code":"const API_BASE = process.env.REACT_APP_API_BASE || '/api';\nasync function handle(res) {\n  const ct = res.headers.get('content-type') || '';\n  if (!res.ok) {\n    // Prefer JSON error if available\n    if (ct.includes('application/json')) {\n      const data = await res.json().catch(() => ({}));\n      // Your backend sends { error: \"message\" }, so we look for data.error\n      const msg = (data === null || data === void 0 ? void 0 : data.error) || JSON.stringify(data) || `HTTP ${res.status}`;\n      throw new Error(msg);\n    } else {\n      const text = await res.text();\n      // surface first part so you can see if you got an HTML page\n      throw new Error(`Non-JSON response (status ${res.status}): ${text.slice(0, 200)}`);\n    }\n  }\n  if (ct.includes('application/json')) {\n    return res.json();\n  } else {\n    const text = await res.text();\n    throw new Error(`Expected JSON but got non-JSON: ${text.slice(0, 200)}`);\n  }\n}\n\n// --- PLANTS API ---\nexport const PlantsAPI = {\n  list: () => fetch(`${API_BASE}/plants`).then(handle),\n  get: id => fetch(`${API_BASE}/plants/${id}`).then(handle),\n  create: payload => fetch(`${API_BASE}/plants`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(payload)\n  }).then(handle),\n  update: (id, payload) => fetch(`${API_BASE}/plants/${id}`, {\n    method: 'PATCH',\n    // Matches your backend!\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(payload)\n  }).then(handle),\n  delete: id => fetch(`${API_BASE}/plants/${id}`, {\n    method: 'DELETE'\n  }).then(handle)\n};\n\n// --- GENERA API (Added this) ---\nexport const GeneraAPI = {\n  // GET /api/genera\n  list: () => fetch(`${API_BASE}/genera`).then(handle),\n  // GET /api/genera/:name (e.g., /api/genera/Anthurium)\n  get: name => fetch(`${API_BASE}/genera/${name}`).then(handle)\n};\n\n// --- WEATHER API (Added this) ---\nexport const WeatherAPI = {\n  // GET /api/weather?city=Manila OR /api/weather?lat=...&lon=...\n  get: params => {\n    // Create query string (e.g., ?city=Manila)\n    const queryString = new URLSearchParams(params).toString();\n    return fetch(`${API_BASE}/weather?${queryString}`).then(handle);\n  }\n};","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_BASE","handle","res","ct","headers","get","ok","includes","data","json","catch","msg","error","JSON","stringify","status","Error","text","slice","PlantsAPI","list","fetch","then","id","create","payload","method","body","update","delete","GeneraAPI","name","WeatherAPI","params","queryString","URLSearchParams","toString"],"sources":["C:/Users/renee/Documents/GitHub/meetur-garden-thesis/frontend/src/api.js"],"sourcesContent":["const API_BASE = process.env.REACT_APP_API_BASE || '/api';\r\n\r\nasync function handle(res) {\r\n  const ct = res.headers.get('content-type') || '';\r\n  if (!res.ok) {\r\n    // Prefer JSON error if available\r\n    if (ct.includes('application/json')) {\r\n      const data = await res.json().catch(() => ({}));\r\n      // Your backend sends { error: \"message\" }, so we look for data.error\r\n      const msg = data?.error || JSON.stringify(data) || `HTTP ${res.status}`;\r\n      throw new Error(msg);\r\n    } else {\r\n      const text = await res.text();\r\n      // surface first part so you can see if you got an HTML page\r\n      throw new Error(`Non-JSON response (status ${res.status}): ${text.slice(0, 200)}`);\r\n    }\r\n  }\r\n  if (ct.includes('application/json')) {\r\n    return res.json();\r\n  } else {\r\n    const text = await res.text();\r\n    throw new Error(`Expected JSON but got non-JSON: ${text.slice(0, 200)}`);\r\n  }\r\n}\r\n\r\n// --- PLANTS API ---\r\nexport const PlantsAPI = {\r\n  list: () => fetch(`${API_BASE}/plants`).then(handle),\r\n  get: (id) => fetch(`${API_BASE}/plants/${id}`).then(handle),\r\n  create: (payload) =>\r\n    fetch(`${API_BASE}/plants`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(payload)\r\n    }).then(handle),\r\n  update: (id, payload) =>\r\n    fetch(`${API_BASE}/plants/${id}`, {\r\n      method: 'PATCH', // Matches your backend!\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(payload)\r\n    }).then(handle),\r\n  delete: (id) =>\r\n    fetch(`${API_BASE}/plants/${id}`, { method: 'DELETE' }).then(handle)\r\n};\r\n\r\n// --- GENERA API (Added this) ---\r\nexport const GeneraAPI = {\r\n  // GET /api/genera\r\n  list: () => fetch(`${API_BASE}/genera`).then(handle),\r\n  \r\n  // GET /api/genera/:name (e.g., /api/genera/Anthurium)\r\n  get: (name) => fetch(`${API_BASE}/genera/${name}`).then(handle)\r\n};\r\n\r\n// --- WEATHER API (Added this) ---\r\nexport const WeatherAPI = {\r\n  // GET /api/weather?city=Manila OR /api/weather?lat=...&lon=...\r\n  get: (params) => {\r\n    // Create query string (e.g., ?city=Manila)\r\n    const queryString = new URLSearchParams(params).toString();\r\n    return fetch(`${API_BASE}/weather?${queryString}`).then(handle);\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}