{"ast":null,"code":"// src/api/plants.js\nexport const API_BASE = \"/api/plants\";\n\n// Helper function to handle errors and parsing\nasync function jsonOrThrow(res) {\n  const raw = await res.text().catch(() => \"\");\n  if (!res.ok) {\n    const msg = raw || `Request failed with ${res.status}`;\n    throw new Error(msg);\n  }\n  try {\n    return raw ? JSON.parse(raw) : null;\n  } catch {\n    return null;\n  }\n}\n\n// --- 1. Get ALL Plants (Added this) ---\nexport async function getAllPlants() {\n  const res = await fetch(API_BASE, {\n    method: \"GET\",\n    credentials: \"omit\"\n  });\n  return jsonOrThrow(res);\n}\n\n// --- 2. Create Plant ---\nexport async function createPlant(payload) {\n  const res = await fetch(API_BASE, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    credentials: \"omit\",\n    body: JSON.stringify(payload)\n  });\n  return jsonOrThrow(res);\n}\n\n// --- 3. Get Single Plant ---\nexport async function getPlant(id) {\n  const res = await fetch(`${API_BASE}/${id}`, {\n    method: \"GET\",\n    credentials: \"omit\"\n  });\n  return jsonOrThrow(res);\n}\n\n// --- 4. Update Plant (FIXED: Changed PUT to PATCH) ---\nexport async function updatePlant(id, payload) {\n  const res = await fetch(`${API_BASE}/${id}`, {\n    method: \"PATCH\",\n    // <--- IMPORTANT: Must match your backend route!\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    credentials: \"omit\",\n    body: JSON.stringify(payload)\n  });\n  return jsonOrThrow(res);\n}\n\n// --- 5. Delete Plant (Added this) ---\nexport async function deletePlant(id) {\n  const res = await fetch(`${API_BASE}/${id}`, {\n    method: \"DELETE\",\n    credentials: \"omit\"\n  });\n  return jsonOrThrow(res);\n}","map":{"version":3,"names":["API_BASE","jsonOrThrow","res","raw","text","catch","ok","msg","status","Error","JSON","parse","getAllPlants","fetch","method","credentials","createPlant","payload","headers","body","stringify","getPlant","id","updatePlant","deletePlant"],"sources":["C:/Users/admin/Documents/GitHub/meetur-garden-thesis/frontend/src/api/plants.js"],"sourcesContent":["// src/api/plants.js\r\nexport const API_BASE = \"/api/plants\";\r\n\r\n// Helper function to handle errors and parsing\r\nasync function jsonOrThrow(res) {\r\n  const raw = await res.text().catch(() => \"\");\r\n  if (!res.ok) {\r\n    const msg = raw || `Request failed with ${res.status}`;\r\n    throw new Error(msg);\r\n  }\r\n  try {\r\n    return raw ? JSON.parse(raw) : null;\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\n// --- 1. Get ALL Plants (Added this) ---\r\nexport async function getAllPlants() {\r\n  const res = await fetch(API_BASE, {\r\n    method: \"GET\",\r\n    credentials: \"omit\",\r\n  });\r\n  return jsonOrThrow(res);\r\n}\r\n\r\n// --- 2. Create Plant ---\r\nexport async function createPlant(payload) {\r\n  const res = await fetch(API_BASE, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    credentials: \"omit\",\r\n    body: JSON.stringify(payload),\r\n  });\r\n  return jsonOrThrow(res);\r\n}\r\n\r\n// --- 3. Get Single Plant ---\r\nexport async function getPlant(id) {\r\n  const res = await fetch(`${API_BASE}/${id}`, {\r\n    method: \"GET\",\r\n    credentials: \"omit\",\r\n  });\r\n  return jsonOrThrow(res);\r\n}\r\n\r\n// --- 4. Update Plant (FIXED: Changed PUT to PATCH) ---\r\nexport async function updatePlant(id, payload) {\r\n  const res = await fetch(`${API_BASE}/${id}`, {\r\n    method: \"PATCH\", // <--- IMPORTANT: Must match your backend route!\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    credentials: \"omit\",\r\n    body: JSON.stringify(payload),\r\n  });\r\n  return jsonOrThrow(res);\r\n}\r\n\r\n// --- 5. Delete Plant (Added this) ---\r\nexport async function deletePlant(id) {\r\n  const res = await fetch(`${API_BASE}/${id}`, {\r\n    method: \"DELETE\",\r\n    credentials: \"omit\",\r\n  });\r\n  return jsonOrThrow(res);\r\n}"],"mappings":"AAAA;AACA,OAAO,MAAMA,QAAQ,GAAG,aAAa;;AAErC;AACA,eAAeC,WAAWA,CAACC,GAAG,EAAE;EAC9B,MAAMC,GAAG,GAAG,MAAMD,GAAG,CAACE,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,EAAE,CAAC;EAC5C,IAAI,CAACH,GAAG,CAACI,EAAE,EAAE;IACX,MAAMC,GAAG,GAAGJ,GAAG,IAAI,uBAAuBD,GAAG,CAACM,MAAM,EAAE;IACtD,MAAM,IAAIC,KAAK,CAACF,GAAG,CAAC;EACtB;EACA,IAAI;IACF,OAAOJ,GAAG,GAAGO,IAAI,CAACC,KAAK,CAACR,GAAG,CAAC,GAAG,IAAI;EACrC,CAAC,CAAC,MAAM;IACN,OAAO,IAAI;EACb;AACF;;AAEA;AACA,OAAO,eAAeS,YAAYA,CAAA,EAAG;EACnC,MAAMV,GAAG,GAAG,MAAMW,KAAK,CAACb,QAAQ,EAAE;IAChCc,MAAM,EAAE,KAAK;IACbC,WAAW,EAAE;EACf,CAAC,CAAC;EACF,OAAOd,WAAW,CAACC,GAAG,CAAC;AACzB;;AAEA;AACA,OAAO,eAAec,WAAWA,CAACC,OAAO,EAAE;EACzC,MAAMf,GAAG,GAAG,MAAMW,KAAK,CAACb,QAAQ,EAAE;IAChCc,MAAM,EAAE,MAAM;IACdI,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CH,WAAW,EAAE,MAAM;IACnBI,IAAI,EAAET,IAAI,CAACU,SAAS,CAACH,OAAO;EAC9B,CAAC,CAAC;EACF,OAAOhB,WAAW,CAACC,GAAG,CAAC;AACzB;;AAEA;AACA,OAAO,eAAemB,QAAQA,CAACC,EAAE,EAAE;EACjC,MAAMpB,GAAG,GAAG,MAAMW,KAAK,CAAC,GAAGb,QAAQ,IAAIsB,EAAE,EAAE,EAAE;IAC3CR,MAAM,EAAE,KAAK;IACbC,WAAW,EAAE;EACf,CAAC,CAAC;EACF,OAAOd,WAAW,CAACC,GAAG,CAAC;AACzB;;AAEA;AACA,OAAO,eAAeqB,WAAWA,CAACD,EAAE,EAAEL,OAAO,EAAE;EAC7C,MAAMf,GAAG,GAAG,MAAMW,KAAK,CAAC,GAAGb,QAAQ,IAAIsB,EAAE,EAAE,EAAE;IAC3CR,MAAM,EAAE,OAAO;IAAE;IACjBI,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CH,WAAW,EAAE,MAAM;IACnBI,IAAI,EAAET,IAAI,CAACU,SAAS,CAACH,OAAO;EAC9B,CAAC,CAAC;EACF,OAAOhB,WAAW,CAACC,GAAG,CAAC;AACzB;;AAEA;AACA,OAAO,eAAesB,WAAWA,CAACF,EAAE,EAAE;EACpC,MAAMpB,GAAG,GAAG,MAAMW,KAAK,CAAC,GAAGb,QAAQ,IAAIsB,EAAE,EAAE,EAAE;IAC3CR,MAAM,EAAE,QAAQ;IAChBC,WAAW,EAAE;EACf,CAAC,CAAC;EACF,OAAOd,WAAW,CAACC,GAAG,CAAC;AACzB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}