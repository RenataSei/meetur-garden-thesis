{"ast":null,"code":"// frontend/src/api.js\nconst API_BASE = process.env.REACT_APP_API_BASE || '/api';\nasync function handle(res) {\n  const ct = res.headers.get('content-type') || '';\n  if (!res.ok) {\n    // Prefer JSON error if available\n    if (ct.includes('application/json')) {\n      const data = await res.json().catch(() => ({}));\n      const msg = (data === null || data === void 0 ? void 0 : data.error) || JSON.stringify(data) || `HTTP ${res.status}`;\n      throw new Error(msg);\n    } else {\n      const text = await res.text();\n      // surface first part so you can see if you got an HTML page\n      throw new Error(`Non-JSON response (status ${res.status}): ${text.slice(0, 200)}`);\n    }\n  }\n  if (ct.includes('application/json')) {\n    return res.json();\n  } else {\n    const text = await res.text();\n    throw new Error(`Expected JSON but got non-JSON: ${text.slice(0, 200)}`);\n  }\n}\nexport const PlantsAPI = {\n  list: () => fetch(`${API_BASE}/plants`).then(handle),\n  get: id => fetch(`${API_BASE}/plants/${id}`).then(handle),\n  create: payload => fetch(`${API_BASE}/plants`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(payload)\n  }).then(handle),\n  update: (id, payload) => fetch(`${API_BASE}/plants/${id}`, {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(payload)\n  }).then(handle),\n  delete: id => fetch(`${API_BASE}/plants/${id}`, {\n    method: 'DELETE'\n  }).then(handle)\n};","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_BASE","handle","res","ct","headers","get","ok","includes","data","json","catch","msg","error","JSON","stringify","status","Error","text","slice","PlantsAPI","list","fetch","then","id","create","payload","method","body","update","delete"],"sources":["C:/Users/admin/Documents/GitHub/meetur-garden-thesis/frontend/src/api.js"],"sourcesContent":["// frontend/src/api.js\r\nconst API_BASE = process.env.REACT_APP_API_BASE || '/api';\r\n\r\nasync function handle(res) {\r\n  const ct = res.headers.get('content-type') || '';\r\n  if (!res.ok) {\r\n    // Prefer JSON error if available\r\n    if (ct.includes('application/json')) {\r\n      const data = await res.json().catch(() => ({}));\r\n      const msg = data?.error || JSON.stringify(data) || `HTTP ${res.status}`;\r\n      throw new Error(msg);\r\n    } else {\r\n      const text = await res.text();\r\n      // surface first part so you can see if you got an HTML page\r\n      throw new Error(`Non-JSON response (status ${res.status}): ${text.slice(0, 200)}`);\r\n    }\r\n  }\r\n  if (ct.includes('application/json')) {\r\n    return res.json();\r\n  } else {\r\n    const text = await res.text();\r\n    throw new Error(`Expected JSON but got non-JSON: ${text.slice(0, 200)}`);\r\n  }\r\n}\r\n\r\nexport const PlantsAPI = {\r\n  list: () => fetch(`${API_BASE}/plants`).then(handle),\r\n  get: (id) => fetch(`${API_BASE}/plants/${id}`).then(handle),\r\n  create: (payload) =>\r\n    fetch(`${API_BASE}/plants`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(payload)\r\n    }).then(handle),\r\n  update: (id, payload) =>\r\n    fetch(`${API_BASE}/plants/${id}`, {\r\n      method: 'PATCH',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(payload)\r\n    }).then(handle),\r\n  delete: (id) =>\r\n    fetch(`${API_BASE}/plants/${id}`, { method: 'DELETE' }).then(handle)\r\n};\r\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,kBAAkB,IAAI,MAAM;AAEzD,eAAeC,MAAMA,CAACC,GAAG,EAAE;EACzB,MAAMC,EAAE,GAAGD,GAAG,CAACE,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC,IAAI,EAAE;EAChD,IAAI,CAACH,GAAG,CAACI,EAAE,EAAE;IACX;IACA,IAAIH,EAAE,CAACI,QAAQ,CAAC,kBAAkB,CAAC,EAAE;MACnC,MAAMC,IAAI,GAAG,MAAMN,GAAG,CAACO,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;MAC/C,MAAMC,GAAG,GAAG,CAAAH,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEI,KAAK,KAAIC,IAAI,CAACC,SAAS,CAACN,IAAI,CAAC,IAAI,QAAQN,GAAG,CAACa,MAAM,EAAE;MACvE,MAAM,IAAIC,KAAK,CAACL,GAAG,CAAC;IACtB,CAAC,MAAM;MACL,MAAMM,IAAI,GAAG,MAAMf,GAAG,CAACe,IAAI,CAAC,CAAC;MAC7B;MACA,MAAM,IAAID,KAAK,CAAC,6BAA6Bd,GAAG,CAACa,MAAM,MAAME,IAAI,CAACC,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC;IACpF;EACF;EACA,IAAIf,EAAE,CAACI,QAAQ,CAAC,kBAAkB,CAAC,EAAE;IACnC,OAAOL,GAAG,CAACO,IAAI,CAAC,CAAC;EACnB,CAAC,MAAM;IACL,MAAMQ,IAAI,GAAG,MAAMf,GAAG,CAACe,IAAI,CAAC,CAAC;IAC7B,MAAM,IAAID,KAAK,CAAC,mCAAmCC,IAAI,CAACC,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC;EAC1E;AACF;AAEA,OAAO,MAAMC,SAAS,GAAG;EACvBC,IAAI,EAAEA,CAAA,KAAMC,KAAK,CAAC,GAAGxB,QAAQ,SAAS,CAAC,CAACyB,IAAI,CAACrB,MAAM,CAAC;EACpDI,GAAG,EAAGkB,EAAE,IAAKF,KAAK,CAAC,GAAGxB,QAAQ,WAAW0B,EAAE,EAAE,CAAC,CAACD,IAAI,CAACrB,MAAM,CAAC;EAC3DuB,MAAM,EAAGC,OAAO,IACdJ,KAAK,CAAC,GAAGxB,QAAQ,SAAS,EAAE;IAC1B6B,MAAM,EAAE,MAAM;IACdtB,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CuB,IAAI,EAAEd,IAAI,CAACC,SAAS,CAACW,OAAO;EAC9B,CAAC,CAAC,CAACH,IAAI,CAACrB,MAAM,CAAC;EACjB2B,MAAM,EAAEA,CAACL,EAAE,EAAEE,OAAO,KAClBJ,KAAK,CAAC,GAAGxB,QAAQ,WAAW0B,EAAE,EAAE,EAAE;IAChCG,MAAM,EAAE,OAAO;IACftB,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CuB,IAAI,EAAEd,IAAI,CAACC,SAAS,CAACW,OAAO;EAC9B,CAAC,CAAC,CAACH,IAAI,CAACrB,MAAM,CAAC;EACjB4B,MAAM,EAAGN,EAAE,IACTF,KAAK,CAAC,GAAGxB,QAAQ,WAAW0B,EAAE,EAAE,EAAE;IAAEG,MAAM,EAAE;EAAS,CAAC,CAAC,CAACJ,IAAI,CAACrB,MAAM;AACvE,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}